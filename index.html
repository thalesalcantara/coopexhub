<!doctype html>
<html lang="pt-br" data-bs-theme="light">
<head>
  <meta charset="utf-8">
  <title>Kratos System · Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#2747d9">
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icon-192.png" sizes="192x192">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <style>
    :root{
      --royal:#2747d9; --royal2:#3b61e3;
      --bg1:#f2f6ff; --bg2:#d2e1ff;
      --glass: rgba(255,255,255,0.36);
      --glassBorder: rgba(70,90,255,0.16);
      --shadow: 0 10px 46px rgba(39,71,217,0.18);
      --green:#23bb75; --ink:#0b1220; --muted:#5b6478;
      --radius: 26px;
      --dockH: calc(76px + env(safe-area-inset-bottom, 0px));
      --pad: 12px;
      --dockGap: 10px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      height:100dvh;
      font-family:'Roboto',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      background:
        radial-gradient(900px 500px at 20% 10%, #ffffff 0%, rgba(255,255,255,0) 60%),
        linear-gradient(120deg, var(--bg1) 0%, var(--bg2) 100%);
      color:var(--ink);
      overflow:hidden;
    }

    .app{height:100dvh; width:100vw; display:flex; flex-direction:column;}

    .topbar{
      padding: 12px 12px 8px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      flex:0 0 auto;
    }
    .brand{display:flex; align-items:center; gap:10px; min-width:0;}
    .brand img{
      width:38px; height:38px; border-radius:14px; object-fit:contain;
      background:#fff; border:1px solid rgba(255,255,255,0.9);
      box-shadow: 0 10px 24px rgba(39,71,217,.20);
      flex:0 0 auto;
    }
    .brand .txt{min-width:0}
    .brand .title{
      margin:0;
      font-family:'Orbitron',sans-serif;
      letter-spacing:1.4px;
      font-size:0.95rem;
      text-transform:uppercase;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      line-height:1.05;
    }
    .brand .sub{
      margin:2px 0 0;
      font-size:0.82rem;
      color:var(--muted);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    .pill{
      display:flex; align-items:center; gap:8px;
      padding: 9px 10px; border-radius: 16px;
      background: rgba(255,255,255,0.55);
      border: 1.4px solid rgba(70,90,255,0.18);
      box-shadow: 0 10px 36px rgba(39,71,217,.10);
      white-space:nowrap; font-size:0.84rem; color:#233;
      flex:0 0 auto;
    }
    .pill i{color:var(--royal2)}
    .dot{width:6px;height:6px;border-radius:99px;background:var(--green);display:inline-block}

    .stage{
      margin: 0 var(--pad) var(--pad);
      flex:1 1 auto;
      border-radius: var(--radius);
      background: var(--glass);
      border: 1.8px solid var(--glassBorder);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
      padding-bottom: var(--dockH);
    }

    .content{
      position:absolute;
      top:0; left:0; right:0;
      bottom: var(--dockH);
      padding: 14px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
    }

    .hero{
      border-radius: 22px;
      padding: 18px 16px;
      background: linear-gradient(135deg, rgba(39,71,217,0.92), rgba(59,97,227,0.90));
      color:#fff;
      box-shadow: 0 14px 44px rgba(39,71,217,0.22);
      display:flex; align-items:center; gap:12px;
    }
    .hero .hlogo{
      width:56px; height:56px; border-radius:18px; background:#fff;
      border:3px solid rgba(255,255,255,0.92);
      object-fit:contain;
      flex:0 0 auto;
    }
    .hero h1{margin:0; font-family:'Orbitron',sans-serif; letter-spacing:1.6px; font-size:1.05rem; text-transform:uppercase;}
    .hero p{margin:4px 0 0; opacity:.9; font-size:.92rem}

    .grid{display:grid; gap:10px; margin-top:12px;}
    .card{
      border-radius: 18px;
      background: rgba(255,255,255,0.64);
      border: 1.4px solid rgba(70,90,255,0.14);
      box-shadow: 0 10px 30px rgba(39,71,217,0.10);
      padding: 12px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .card:active{transform: scale(0.995);}
    .c-left{display:flex; align-items:center; gap:12px; min-width:0;}
    .c-ico{
      width:44px; height:44px; border-radius:16px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(39,71,217,0.10);
      color: var(--royal);
      font-size: 1.25rem;
      flex:0 0 auto;
    }
    .c-txt{min-width:0}
    .c-txt b{display:block; font-size:.92rem; letter-spacing:.06em; text-transform:uppercase; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .c-txt span{display:block; font-size:.80rem; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .c-go{color:var(--royal); opacity:.9; font-size:1.3rem; flex:0 0 auto;}

    .dock{
      position:absolute;
      left: var(--dockGap);
      right: var(--dockGap);
      bottom: calc(var(--dockGap) + env(safe-area-inset-bottom, 0px));
      height: 62px;
      border-radius: 22px;
      background: rgba(255,255,255,0.58);
      border: 1.6px solid rgba(70,90,255,0.16);
      box-shadow: 0 14px 44px rgba(39,71,217,0.18);
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px;
      backdrop-filter: blur(18px) saturate(140%);
      -webkit-backdrop-filter: blur(18px) saturate(140%);
    }
    .tab{
      flex:1;
      height:100%;
      border-radius: 18px;
      border:0;
      background: transparent;
      display:flex; align-items:center; justify-content:center;
      gap:10px;
      cursor:pointer;
      color:#243;
      user-select:none;
      transition: background .12s ease, transform .12s ease, box-shadow .12s ease;
      padding: 10px 12px;
    }
    .tab .ico{
      width:38px; height:38px; border-radius:14px;
      display:flex; align-items:center; justify-content:center;
      background: rgba(39,71,217,0.10);
      color: var(--royal);
      font-size: 1.15rem;
      flex:0 0 auto;
    }
    .tab b{
      font-size:.86rem; letter-spacing:.06em; text-transform:uppercase;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      max-width: 100%;
    }
    .tab.active{
      background: linear-gradient(135deg, rgba(39,71,217,0.92), rgba(59,97,227,0.90));
      color:#fff;
      box-shadow: 0 12px 30px rgba(39,71,217,0.34);
      transform: translateY(-1px);
    }
    .tab.active .ico{background: rgba(255,255,255,0.18); color:#fff;}

    @media (max-width: 420px){
      .pill{display:none;}
      .tab b{font-size:.80rem;}
    }
  </style>
</head>

<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">
        <img src="kratos-logo.png" alt="Logo Kratos System">
        <div class="txt">
          <p class="title">Kratos System</p>
          <p class="sub" id="subTitle">Hub de Acesso</p>
        </div>
      </div>

      <div class="pill">
        <i class="bi bi-shield-lock-fill"></i>
        Sessão segura
        <span class="dot"></span>
      </div>
    </div>

    <div class="stage">
      <div class="content">
        <div class="hero">
          <img src="kratos-logo.png" class="hlogo" alt="Logo">
          <div>
            <h1>CoopexHub</h1>
            <p>Toque em um ambiente para abrir em tela cheia (login funciona).</p>
          </div>
        </div>

        <div class="grid">
          <div class="card" data-key="supervisao">
            <div class="c-left">
              <div class="c-ico"><i class="bi bi-headset"></i></div>
              <div class="c-txt">
                <b>Supervisão</b>
                <span>Escalas, turnos e controle operacional.</span>
              </div>
            </div>
            <div class="c-go"><i class="bi bi-arrow-right-short"></i></div>
          </div>

          <div class="card" data-key="estab">
            <div class="c-left">
              <div class="c-ico"><i class="bi bi-shop-window"></i></div>
              <div class="c-txt">
                <b>Estabelecimentos</b>
                <span>Financeiro, lançamentos e relatórios.</span>
              </div>
            </div>
            <div class="c-go"><i class="bi bi-arrow-right-short"></i></div>
          </div>

          <div class="card" data-key="parceria">
            <div class="c-left">
              <div class="c-ico"><i class="bi bi-people-fill"></i></div>
              <div class="c-txt">
                <b>Parceria</b>
                <span>Portal de integração com o Kratos System.</span>
              </div>
            </div>
            <div class="c-go"><i class="bi bi-arrow-right-short"></i></div>
          </div>
        </div>
      </div>

      <div class="dock" role="tablist" aria-label="Ambientes">
        <button class="tab active" type="button" data-key="supervisao">
          <span class="ico"><i class="bi bi-headset"></i></span>
          <b>Supervisão</b>
        </button>
        <button class="tab" type="button" data-key="estab">
          <span class="ico"><i class="bi bi-shop-window"></i></span>
          <b>Estab.</b>
        </button>
        <button class="tab" type="button" data-key="parceria">
          <span class="ico"><i class="bi bi-people-fill"></i></span>
          <b>Parceria</b>
        </button>
      </div>
    </div>
  </div>

<script>
(function(){
  const APPS = {
    supervisao: "https://escalas-2-1.onrender.com/",
    estab: "https://financas-dxsu.onrender.com/",
    parceria: "https://kratossystem.onrender.com/login"
  };

  const tabs = Array.from(document.querySelectorAll(".tab"));
  const cards = Array.from(document.querySelectorAll(".card"));
  const subTitle = document.getElementById("subTitle");

  function setActive(key){
    tabs.forEach(t => t.classList.toggle("active", t.dataset.key === key));
    const label = key === "supervisao" ? "Supervisão" : key === "estab" ? "Estabelecimentos" : "Parceria";
    subTitle.textContent = label + " · Toque para abrir";
    localStorage.setItem("hub_last", key);
  }

  function openApp(key){
    setActive(key);
    window.location.href = APPS[key];
  }

  tabs.forEach(t => t.addEventListener("click", () => openApp(t.dataset.key)));
  cards.forEach(c => c.addEventListener("click", () => openApp(c.dataset.key)));

  const last = localStorage.getItem("hub_last");
  if (last && APPS[last]) setActive(last);

  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js").catch(()=>{});
  }
})();
</script>
</body>
</html>
